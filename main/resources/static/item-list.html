<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>상품 목록</title>
</head>
<body>
<h1>상품 목록</h1>
<div id="itemListContainer">
    <p>상품 목록을 불러오는 중...</p>
</div>
<hr>
<a href="/index.html">홈으로</a>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const itemListContainer = document.getElementById('itemListContainer');

        const fetchItems = async () => {
            try {
                const response = await fetch('/상품목록');
                if (!response.ok) {
                    throw new Error('네트워크 응답이 올바르지 않습니다.');
                }
                const items = await response.json();

                if (items.length === 0) {
                    itemListContainer.innerHTML = '<p>등록된 상품이 없습니다.</p>';
                    return;
                }

                const ul = document.createElement('ul');
                items.forEach(item => {
                    const li = document.createElement('li');
                    let content = `
                            <strong>상품명:</strong> ${item.name}, 
                            <strong>가격:</strong> ${item.price}, 
                            <strong>재고:</strong> ${item.stockQuantity}
                        `;

                    if (item.director) {
                        content += `, <strong>감독:</strong> ${item.director}, <strong>배우:</strong> ${item.actor}`;
                    } else if (item.artist) {
                        content += `, <strong>아티스트:</strong> ${item.artist}, <strong>기타:</strong> ${item.etc}`;
                    } else if (item.author) {
                        content += `, <strong>작가:</strong> ${item.author}, <strong>ISBN:</strong> ${item.isbn}`;
                    }
                    li.innerHTML = content;
                    ul.appendChild(li);
                });
                itemListContainer.innerHTML = '';
                itemListContainer.appendChild(ul);

            } catch (error) {
                console.error('Error:', error);
                itemListContainer.innerHTML = '<p>상품 목록을 불러오는 데 실패했습니다.</p>';
            }
        };
        fetchItems();
    });
</script>
</body>
</html>
